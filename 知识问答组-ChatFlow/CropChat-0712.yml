app:
  description: ''
  icon: 🤖
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: CropChat-0712
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/aihubmix:0.0.4@4f3cd440d18aa9d3780ca53e905bff82a9364f000b9f2b631a15719b795dd0bd
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: yevanchen/mem0:0.0.2@2d92eb21f4fe6370832f479223b075cbfae81deababb796e784018d3830d00cd
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/google:0.0.9@d360bbc433f39be1b11909cb9c32e6be4a17ea06af083f9e1c7613bb802bf517
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: true
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      autoPlay: disabled
      enabled: true
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1751523250456-true-1751522408275-target
      selected: false
      source: '1751523250456'
      sourceHandle: 'true'
      target: '1751522408275'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: list-operator
        targetType: if-else
      id: 17515270765270-source-1751523250456-target
      selected: false
      source: '17515270765270'
      sourceHandle: source
      target: '1751523250456'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: 1751522408275-source-1751529541953-target
      selected: false
      source: '1751522408275'
      sourceHandle: source
      target: '1751529541953'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: variable-aggregator
      id: 1751529541953-source-1751529956993-target
      selected: false
      source: '1751529541953'
      sourceHandle: source
      target: '1751529956993'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: variable-aggregator
      id: 1751420471678-source-1751529956993-target
      selected: false
      source: '1751420471678'
      sourceHandle: source
      target: '1751529956993'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: llm
      id: 1751529956993-source-1751529646692-target
      selected: false
      source: '1751529956993'
      sourceHandle: source
      target: '1751529646692'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: question-classifier
        targetType: question-classifier
      id: 1751518512496-1-1752109667157-target
      selected: false
      source: '1751518512496'
      sourceHandle: '1'
      target: '1752109667157'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: list-operator
      id: 1752109667157-1-17515270765270-target
      selected: false
      source: '1752109667157'
      sourceHandle: '1'
      target: '17515270765270'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: knowledge-retrieval
      id: 1752109667157-1-1751420471678-target
      selected: false
      source: '1752109667157'
      sourceHandle: '1'
      target: '1751420471678'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: knowledge-retrieval
      id: 1752109667157-2-1751943692201-target
      selected: false
      source: '1752109667157'
      sourceHandle: '2'
      target: '1751943692201'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: knowledge-retrieval
      id: 1751518512496-2-1751941815384-target
      selected: false
      source: '1751518512496'
      sourceHandle: '2'
      target: '1751941815384'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: llm
      id: 1751518512496-1751941345826-1751965010191-target
      selected: false
      source: '1751518512496'
      sourceHandle: '1751941345826'
      target: '1751965010191'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: tool
      id: 1751360497336-source-1752234929285-target
      selected: false
      source: '1751360497336'
      sourceHandle: source
      target: '1752234929285'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: question-classifier
      id: 1752234929285-source-1751518512496-target
      selected: false
      source: '1752234929285'
      sourceHandle: source
      target: '1751518512496'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: 1751529646692-source-1752234989378-target
      selected: false
      source: '1751529646692'
      sourceHandle: source
      target: '1752234989378'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: answer
      id: 1752234989378-source-1751420727676-target
      selected: false
      source: '1752234989378'
      sourceHandle: source
      target: '1751420727676'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: 1751965010191-source-17522350976640-target
      selected: false
      source: '1751965010191'
      sourceHandle: source
      target: '17522350976640'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: answer
      id: 17522350976640-source-1751965296697-target
      selected: false
      source: '17522350976640'
      sourceHandle: source
      target: '1751965296697'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: variable-aggregator
      id: 1752235502261-source-17522355261370-target
      selected: false
      source: '1752235502261'
      sourceHandle: source
      target: '17522355261370'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: tool
      id: 1752109667157-2-1752235493902-target
      selected: false
      source: '1752109667157'
      sourceHandle: '2'
      target: '1752235493902'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: tool
      id: 1752235493902-source-1752235502261-target
      selected: false
      source: '1752235493902'
      sourceHandle: source
      target: '1752235502261'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: answer
      id: 17522350562700-source-1751943700690-target
      selected: false
      source: '17522350562700'
      sourceHandle: source
      target: '1751943700690'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: variable-aggregator
      id: 1751943692201-source-17522355261370-target
      selected: false
      source: '1751943692201'
      sourceHandle: source
      target: '17522355261370'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: llm
      id: 17522355261370-source-1751943695883-target
      selected: false
      source: '17522355261370'
      sourceHandle: source
      target: '1751943695883'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: 1751943695883-source-17522350562700-target
      selected: false
      source: '1751943695883'
      sourceHandle: source
      target: '17522350562700'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: list-operator
      id: 1751518512496-2-17522369316570-target
      source: '1751518512496'
      sourceHandle: '2'
      target: '17522369316570'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: list-operator
        targetType: if-else
      id: 17522369316570-source-17522369355610-target
      source: '17522369316570'
      sourceHandle: source
      target: '17522369355610'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17522369355610-true-17522369399550-target
      source: '17522369355610'
      sourceHandle: 'true'
      target: '17522369399550'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: 17522369399550-source-17522369724100-target
      source: '17522369399550'
      sourceHandle: source
      target: '17522369724100'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: variable-aggregator
      id: 17522369724100-source-17522369631620-target
      source: '17522369724100'
      sourceHandle: source
      target: '17522369631620'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: variable-aggregator
      id: 1751941815384-source-17522369631620-target
      source: '1751941815384'
      sourceHandle: source
      target: '17522369631620'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: llm
      id: 17522369631620-source-17522370895920-target
      source: '17522369631620'
      sourceHandle: source
      target: '17522370895920'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: 17522370895920-source-17522370958360-target
      source: '17522370895920'
      sourceHandle: source
      target: '17522370958360'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: answer
      id: 17522370958360-source-17522371009640-target
      source: '17522370958360'
      sourceHandle: source
      target: '17522371009640'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: 开始
        type: start
        variables: []
      height: 53
      id: '1751360497336'
      position:
        x: -2218.2640794849076
        y: -422.60732961806247
      positionAbsolute:
        x: -2218.2640794849076
        y: -422.60732961806247
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - UUgh54R1W4weN+JIRPqyZc5ANx+Z1eSgyeIcwOMyK/PC5qJ4pqcej2u+P//6Dhjt
        desc: ''
        multiple_retrieval_config:
          reranking_enable: false
          reranking_mode: reranking_model
          reranking_model:
            model: jina-colbert-v2
            provider: langgenius/aihubmix/aihubmix
          score_threshold: null
          top_k: 4
          weights:
            keyword_setting:
              keyword_weight: 0.4
            vector_setting:
              embedding_model_name: lke-text-embedding-v1
              embedding_provider_name: langgenius/hunyuan/hunyuan
              vector_weight: 0.6
        query_variable_selector:
        - '1751360497336'
        - sys.query
        retrieval_mode: multiple
        selected: false
        title: 诊断知识检索
        type: knowledge-retrieval
      height: 91
      id: '1751420471678'
      position:
        x: -827.1986623322254
        y: -487.1040867310686
      positionAbsolute:
        x: -827.1986623322254
        y: -487.1040867310686
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1751529646692.text#}}'
        desc: ''
        selected: false
        title: 诊断问题回复
        type: answer
        variables: []
      height: 104
      id: '1751420727676'
      position:
        x: 1240.8667145889674
        y: -487.1040867310686
      positionAbsolute:
        x: 1240.8667145889674
        y: -487.1040867310686
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: 本类问题关注玉米在种植过程中出现的病害、虫害现象，如叶斑、枯萎、虫咬等。用户通常寻求识别病虫种类、了解发病原因或获取防治建议。
        - id: '2'
          name: 涉及玉米种植后者生长过程中的各类问题，包括分析玉米照片的外貌特征、播种时间、施肥管理、浇水频率、品种选择、田间管理、产量提升等非病虫害因素。
        - id: '1751941345826'
          name: 泛指非玉米病虫害或种植的问题，或者用户没有明确作物信息的提问，缺少相关的信息
        desc: ''
        instructions: ''
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/aihubmix/aihubmix
        query_variable_selector:
        - '1751360497336'
        - sys.query
        selected: false
        title: 问题分类器1
        topics: []
        type: question-classifier
        vision:
          enabled: false
      height: 353
      id: '1751518512496'
      position:
        x: -1565.9953064424835
        y: -422.60732961806247
      positionAbsolute:
        x: -1565.9953064424835
        y: -422.60732961806247
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: o3
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: 5059a5ce-9bf7-4bcc-adde-c232a47494e3
          role: system
          text: "你是一名农业领域的专家，主要负责与玉米的培育、病虫害防治工作。用户会给你发送若干图片，你需要提取出图片中的特征。\n\n# 玉米病虫害诊断映射表\n\
            \n- 根部或茎基部变褐/腐烂 → 苗枯病\n\n- 茎基部无蛀孔 + 中上部叶片失绿/扭曲/腐烂 + 茎基部纵向开裂变褐 → 顶腐病\n\n\
            - 叶片缺刻 + 体表光滑多色体线 + 头有\"八\"字纹幼虫 → 黏虫\n- 银灰色条斑 + 叶心黑色线头状虫 → 蓟马\n- 心叶排孔状花叶\
            \ → 玉米螟\n\n- 隆起病斑 + 黄褐色/红棕色粉 +颜色更暗+病斑密集且相对南方锈病更大→ 普通锈病  \n- 隆起病斑 + 黄色/金黄色粉\
            \ +颜色更亮+病斑小且密集→ 南方锈病\n\n- 大梭形斑 + 中央灰褐色 → 大斑病  \n- 小黄褐色斑 + 受叶脉限制 +斑多分散且小→\
            \ 小斑病  \n- 小圆斑（灰白中心+暗褐边+黄晕）→ 弯孢霉叶斑病  \n- 黄红小圆斑 + 连片成带状 +中脉两侧+红褐斑/黑褐斑 →\
            \ 褐斑病\n\n- 茎基疏松 + 叶片青枯 + 雌穗下垂 → 茎基腐病   \n- 茎部蛀孔 + 排泄物 → 玉米螟  \n\n- 雌穗短粗无花丝\
            \ + 黑粉丝状物 → 黑穗病  \n- 瘤状物（白膜→黑粉）→ 瘤黑粉病  \n\n- 蛀穗 + 背中线明显幼虫 → 玉米螟  \n\n\n\
            \n分析图片：\n1、图片中病害的位置\n2、图片中病害的大小？很大或者很小\n3、图片中病害的形状？\n3、图片中病害的颜色\n4、图片中是否有虫子，如果有虫子是什么颜色的，虫子是否有特殊花纹\n\
            \n按照分析图片的结果查找映射表 只输出“是什么病应该如何防治？”，这句话中你只需要填充是什么病不需要回答防治部分"
        - id: 2e101f62-2859-4b70-a3e3-99420a77ba68
          role: user
          text: '这是我的玉米的图像：

            {{#17515270765270.result#}}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: 诊断图像分析
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - '17515270765270'
            - result
          enabled: true
      height: 118
      id: '1751522408275'
      position:
        x: -291.8637992385293
        y: -675.6988861971972
      positionAbsolute:
        x: -291.8637992385293
        y: -675.6988861971972
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: dd4f7c7b-597f-43f8-a542-796a5ef35b44
            sub_variable_condition:
              case_id: 87871621-e506-4b72-89cc-006b8ede7e13
              conditions:
              - comparison_operator: in
                id: 63d69ce6-6b14-4ac8-8b2c-7e0a2e6da390
                key: type
                value:
                - image
                varType: string
              logical_operator: and
            value: ''
            varType: array[file]
            variable_selector:
            - '17515270765270'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 条件分支
        type: if-else
      height: 125
      id: '1751523250456'
      position:
        x: -580.8141456917483
        y: -706.0904991190442
      positionAbsolute:
        x: -580.8141456917483
        y: -706.0904991190442
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        extract_by:
          enabled: false
          serial: '1'
        filter_by:
          conditions:
          - comparison_operator: in
            key: type
            value:
            - image
          enabled: true
        item_var_type: file
        limit:
          enabled: false
          size: 10
        order_by:
          enabled: false
          key: name
          value: asc
        selected: false
        title: 列表操作
        type: list-operator
        var_type: array[file]
        variable:
        - sys
        - files
      height: 91
      id: '17515270765270'
      position:
        x: -893.8231669220534
        y: -706.0904991190442
      positionAbsolute:
        x: -893.8231669220534
        y: -706.0904991190442
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - UUgh54R1W4weN+JIRPqyZc5ANx+Z1eSgyeIcwOMyK/PC5qJ4pqcej2u+P//6Dhjt
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: jina-colbert-v2
            provider: langgenius/aihubmix/aihubmix
          score_threshold: null
          top_k: 3
          weights:
            keyword_setting:
              keyword_weight: 0
            vector_setting:
              embedding_model_name: text-embedding-v4
              embedding_provider_name: langgenius/tongyi/tongyi
              vector_weight: 1
        query_variable_selector:
        - '1751522408275'
        - text
        retrieval_mode: multiple
        selected: false
        title: 诊断知识检索（图）
        type: knowledge-retrieval
      height: 91
      id: '1751529541953'
      position:
        x: 99.18812464327993
        y: -675.6988861971972
      positionAbsolute:
        x: 99.18812464327993
        y: -675.6988861971972
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1751522408275'
          - text
        desc: ''
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 50
        model:
          completion_params: {}
          mode: chat
          name: DeepSeek-R1
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: 0198d78d-b5a3-491f-9b78-d1b597e84002
          role: system
          text: "根据用户的问题和图片，知识库中的以下内容可能对你有用：\n{{#17515270765270.result#}}\n{{#context#}}\n\
            # 角色与任务\n你是一名经验丰富的病虫害研究员和农技推广员，专注于为玉米种植户提供科学、实用、安全的病虫害综合治理方案。你的核心任务是准确回答用户关于玉米（Zea\
            \ mays L.）全生育期（VE，V1，V2，V4，V6，V10 ,V12 ,V14 ,V17 ,R1,R2,R3,R4,R5,R6）的各类技术问题，并重点解决玉米病虫害的识别诊断与安全有效防治问题。\n\
            #回答要求\n回答需要基于知识库的内容，不得提供知识库以外的信息作为答案。\n如果你（模型）认为描述的症状可以对应多种病，请你（模型）提问更多的细节（例如斑点的大小，叶子上是否有虫子等可以区分这些病的细节但是没有被提到的症状），并且告诉他如果可以提供玉米的照片可以诊断的更精准\n\
            # 输出要求\n回答需要基于知识库的内容，不得提供知识库以外的信息作为答案。\n1.  **结构清晰：**\n    *   对于技术问题：分点阐述，逻辑清晰。\n\
            \    *   **对于病虫害诊断与治理（重点）：**\n        *   **步骤1 (诊断)：** “根据您描述的症状（[复述用户关键描述]），这很可能是[病虫害名称]。典型症状包括：[列出关键识别特征]。”\n\
            \        *   **步骤2 (原因分析)：** “该病/虫害通常在[发生条件，如多雨高湿、特定生育期]易发，由[病原菌名/害虫名]引起/造成。”\n\
            \        *   **步骤3 (综合治理方案)：**\n            *   “**农业防治：** [具体措施，如选用抗病品种、清除病残体、合理密植、科学施肥]”\n\
            \            *   “**生物/物理防治：** [如释放天敌、使用性诱剂、灯光诱杀]（如适用）”\n            *\
            \   “**化学防治（当前应急）：** 可选用以下**登记药剂**之一：\n                *   **药剂A (有效成分X%\
            \ Y)：** [剂量/浓度]，[施用方法]，[最佳防治时期]。**安全间隔期：[天数]。防护要求：[具体要求]。注意：[警示信息，如对蜜蜂毒性高，开花期禁用]。**\n\
            \                *   **药剂B (有效成分M% N)：** ... （同上）\n                * \
            \  **重要提示：务必轮换使用不同作用机理的药剂。**”\n        *   **步骤4 (预防建议)：** “下季/后期预防：...”\n\
            2.  **语言风格：** 专业、严谨、务实、耐心、易于理解。解释必要的专业术语。避免使用过于口语化或模糊不清的表达（如“打点药”、“多浇水”），要具体化。\n\
            3.  **信息准确性：** 确保所有技术细节、数据（如温度、剂量、时期）、病虫害名称和农药信息准确无误。不确定时，明确告知“该信息无法确认，建议咨询当地农技人员”。\n\
            4.  **主动追问：** 如果用户描述过于简略或模糊（例如只说“玉米叶子黄了”），应礼貌地追问关键细节（如“请问叶片发黄的具体部位？是全株发黄还是下部叶片先黄？是否有斑点或枯死？发生在什么生育期？近期天气如何？”）以便更准确诊断。\n\
            \n# 限制与边界\n1.  **仅限玉米：** 不回答其他作物（小麦、水稻等）的详细问题，除非与玉米轮作或间套作直接相关。\n2.  **非职责范围：**\
            \ 不提供医疗、投资、法律、政策解读（如补贴申请细则）等建议。市场行情预测仅作一般性趋势讨论，不作为决策依据。\n3.  **知识截止：**\
            \ 知识截止于2025年07月。之后的新技术、新政策、新登记农药可能未知。\n4.  **地域差异：** 提供的是一般性指导。**强烈强调：**\
            \ 中国地域辽阔，气候土壤差异大，病虫害发生规律和防治策略可能因地而异。\n\n# 安全免责声明 (必须包含在涉及病虫害防治的回答中)\n\
            **重要提示：** 本建议基于您提供的信息和一般性农业知识，旨在提供参考。**病虫害的准确诊断和防治方案需结合具体田间情况。** 农药使用具有风险，请务必：\n\
            *   **仔细阅读并严格遵守所购农药标签上的所有说明和安全规定。**\n*   **咨询当地农业农村局植保站或资深农技推广人员进行实地诊断和确认，并遵循当地植保部门的指导意见。**\n\
            *   **做好个人安全防护，保护环境。**\n*   **本回答不承担因按照此建议操作而产生的任何损失或责任。**\n\n# 示例 (Few-Shot\
            \ Example)\n用户： 我家玉米现在到大喇叭口期了，这几天发现下部叶片上有很多椭圆形、灰褐色的病斑，边缘颜色深，中间颜色浅，潮湿时好像还有黑霉。这是啥病？咋治？\n\
            你 (模型)：\n### 诊断\n根据您描述的“玉米大喇叭口期”、“下部叶片”、“椭圆形灰褐色病斑”、“边缘深褐色”、“中央淡褐色”、“潮湿时有黑霉”这些关键特征，这高度符合**玉米大斑病**的典型症状。\n\
            \n### 原因分析\n大斑病是由真菌（大斑凸脐蠕孢菌 *Exserohilum turcicum*）引起的叶部病害。高温高湿（尤其是连续降雨或田间湿度大）、种植感病品种、连作、氮肥过量、种植过密等条件都利于该病流行。大喇叭口期至抽雄期是易感病阶段。\n\
            \n### 综合治理方案\n1.  **农业防治 (立即行动):**\n    *   及时摘除并移出田外销毁病叶（底部严重发病的1-3片叶），减少菌源。\n\
            \    *   确保田间排水通畅，降低湿度。\n    *   避免偏施氮肥，增施磷钾肥。\n2.  **化学防治 (当前控制蔓延)：**\
            \ 发病初期是防治关键期。可选用以下**登记用于防治玉米大斑病**的杀菌剂之一进行叶面喷雾：\n    *   **50%氯溴异氰脲酸（绿亨六号）水溶性粉剂1000倍液**\
            \ \n    *   **40％氟硅唑乳油（杜邦福星）8000倍液** \n    *   **10％苯醚甲环唑（世高）水分散粒剂1500～2000倍液**\
            \ \n    *   **50％异菌脲（扑海因）可湿性粉剂1000～1500倍液**\n    *   **70％代森锰锌可湿性粉剂500～800倍液**\n\
            \    *\t**20％三唑酮（粉锈宁）乳油1000～1500倍液**\n    *\t**50％多菌灵可湿性粉剂500倍液或75％百菌清可湿性粉剂500倍液**\n\
            \     同时可加入云大120的1500～2000倍液、绿风95的600倍液和1％～3％的尿素，提高植株抗病能力。每隔7～10天喷药1次，连喷2～3次。\n\
            \    **关键提示：**\n    *   **轮换用药！** 避免连续单一使用同一种药剂，可将上述药剂（如吡唑醚菌酯与代森锰锌）轮换使用或选择复配剂。\n\
            \    *   **喷匀喷透：** 保证药液能覆盖到中下部叶片。\n    *   **关注天气：** 选择晴天无风或微风时施药，施药后4小时内遇雨需补喷。\n\
            3.  **下季预防：**\n    *   **选用抗（耐）病品种：** 是防治大斑病最经济有效的措施。\n    *   **轮作倒茬：**\
            \ 与非禾本科作物轮作。\n    *   **处理病残体：** 收获后深翻土壤，将病残体深埋或移出田外销毁。\n    *   **适期播种：**\
            \ 避免晚播。\n    *   **合理密植：** 保证田间通风透光。\n\n**重要安全提示与免责声明：** 本建议仅供参考。请务必：\n\
            *   **购买农药时确认其登记作物包含玉米，防治对象包含大斑病，并处于有效登记状态。**\n*   **仔细阅读并严格遵守所选农药标签上的所有说明、剂量、安全间隔期和安全防护要求。**\n\
            *   **强烈建议咨询当地农技推广站或植保专家，根据您地块的具体情况（如品种、发病程度、天气趋势）获取最精准的防治指导和药剂推荐。** 农药使用不当可能造成药害、环境污染和农产品残留超标。使用者需自行承担相关风险和责任。\n\
            \n\n用户的问题是：\n{{#sys.query#}}\n用户上传图片的分析结果，你可以信任这个结果不用继续追问"
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 755
        selected: false
        title: 诊断整合LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: '1751529646692'
      position:
        x: 606.4382448058753
        y: -487.1040867310686
      positionAbsolute:
        x: 606.4382448058753
        y: -487.1040867310686
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: array[object]
        selected: false
        title: 变量聚合器
        type: variable-aggregator
        variables:
        - - '1751529541953'
          - result
        - - '1751420471678'
          - result
      height: 130
      id: '1751529956993'
      position:
        x: 336.9732826466206
        y: -487.1040867310686
      positionAbsolute:
        x: 336.9732826466206
        y: -487.1040867310686
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - +MUtFaUoCJThwFsspJhmVDuWPliXyZzsgwxVjk8DHKg8sPbefUn/ViCiWLxvV20Z
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: jina-reranker-m0
            provider: langgenius/aihubmix/aihubmix
          score_threshold: null
          top_k: 10
        query_variable_selector:
        - '1751360497336'
        - sys.query
        retrieval_mode: multiple
        selected: false
        title: 种植知识检索
        type: knowledge-retrieval
      height: 91
      id: '1751941815384'
      position:
        x: 36.56107309104323
        y: 200.46445167856228
      positionAbsolute:
        x: 36.56107309104323
        y: 200.46445167856228
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - UUgh54R1W4weN+JIRPqyZc5ANx+Z1eSgyeIcwOMyK/PC5qJ4pqcej2u+P//6Dhjt
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: jina-colbert-v2
            provider: langgenius/aihubmix/aihubmix
          score_threshold: null
          top_k: 4
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/aihubmix/aihubmix
              vector_weight: 0.7
        query_variable_selector:
        - '1751360497336'
        - sys.query
        retrieval_mode: multiple
        selected: false
        title: 病虫害知识检索
        type: knowledge-retrieval
      height: 91
      id: '1751943692201'
      position:
        x: -556.24280802999
        y: -375.2045049036565
      positionAbsolute:
        x: -556.24280802999
        y: -375.2045049036565
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1751943692201'
          - result
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: DeepSeek-R1
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: 4d5da26c-5231-413f-bf69-9843b53dd334
          role: system
          text: '根据用户的问题和图片，知识库中的以下内容可能对你有用：

            {{#context#}}

            角色与任务

            你是一名农业玉米知识专家，专注于向用户准确、简明地解释玉米病虫害的相关知识。你的核心任务是：

            回答用户关于玉米病虫害基础知识的提问

            用通俗易懂的语言解释专业概念

            在回答完基础问题后，主动引导用户深入了解相关扩展知识

            回答要求

            精准回答：严格根据知识库内容，仅回答用户提问的具体问题

            简明扼要：用最简洁的语言解释概念，避免冗长

            专业严谨：确保所有专业术语和数据准确无误

            引导扩展：在回答完基本问题后，提供1-2个相关扩展问题的引导

            输出格式

            "玉米大斑病是由大斑凸脐蠕孢菌引起的一种叶部真菌病害。"

            "您是否还想了解：

            玉米大斑病的典型症状特征？

            玉米大斑病的发病条件？

            如需诊断和防治建议，请描述您田间玉米的具体情况。"

            语言风格

            专业但不晦涩

            简洁明了

            避免使用过于技术性的表述

            适当使用比喻帮助理解（如"病斑像纺锤形"）

            限制与边界

            仅回答病虫害基础知识，不提供具体防治方案

            不回答超出玉米范围的问题

            不确定时明确告知"该信息不在当前知识库中"

            示例对话

            用户：什么是玉米锈病？

            回答：

            "玉米锈病在我国主要有普通锈病和南方锈病两种，病原菌分别是高粱柄锈菌（Puccinia sorghi）和多堆柄锈菌（P.poysora），均属担子菌亚门柄锈菌属真菌（图6-1）。南方锈病主要发生在海南和台湾等地，但近年来在北方局部地区也有发生。普通锈病分布广，各地均有发生。典型症状是叶片上出现铁锈色的粉状孢子堆。

            您是否还想了解：

            玉米锈病与其他叶部病害的区别？

            哪些条件容易导致锈病发生？

            如需诊断您田间的具体问题，请描述病斑特征和发生情况。"

            用户：玉米螟长什么样？

            回答：

            "玉米螟成虫是黄褐色的蛾子，幼虫淡黄色带黑点，体长约2-3厘米，是钻蛀玉米茎秆的主要害虫。

            您是否还想了解：

            玉米螟的危害症状？

            玉米螟的发生规律？

            如需防治建议，请告知您玉米的生长阶段和虫害情况。"

            特殊处理

            当用户提问过于宽泛时：

            "您的问题比较广泛，我可以先为您介绍基本概念。您最想了解的是病原、症状还是危害特点？"


            用户的问题是：

            {{#sys.query#}}'
        selected: false
        structured_output_enabled: false
        title: '病虫害知识LLM '
        type: llm
        variables: []
        vision:
          enabled: false
      height: 89
      id: '1751943695883'
      position:
        x: -14.542459141329914
        y: -86.18420893786721
      positionAbsolute:
        x: -14.542459141329914
        y: -86.18420893786721
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1751943695883.text#}}'
        desc: ''
        selected: false
        title: 病虫害知识问题回复
        type: answer
        variables: []
      height: 104
      id: '1751943700690'
      position:
        x: 593.9615532063231
        y: -86.18420893786721
      positionAbsolute:
        x: 593.9615532063231
        y: -86.18420893786721
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: DeepSeek-R1
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: d11512db-79ae-4b23-9949-7a1bb2461ed6
          role: system
          text: "# 指令规则\n1. **严格优先级判断**：按以下顺序匹配用户问题：\n   - 第一步：检测是否为问候/身份类问题（如\"你好\"\
            \"你是谁\"等关键词）\n   - 第二步：其他问题均视为无关问题\n\n2. **响应模板强制绑定**：\n   - 当问题匹配「问候/身份类」时\
            \ → **必须且只能**使用以下模板：\n     ```\n     \"您好！我是您的玉米种植与病虫害智能助手，专门解答从选种到收获的全流程问题，比如：\n\
            \     • 如何判断玉米的最佳收割期？\n     • 玉米秸秆还田有哪些注意事项？\n     如果您有具体问题，随时告诉我哦！\n\
            \     *小知识：玉米的祖先是大刍草，9000年前就被古印第安人驯化啦~*\"\n     ```\n   - 其他情况 → 使用无关问题模板\n\
            \n\"您好！我是专注于玉米种植与病虫害的智能助手，可以为您解答关于玉米的各类问题，例如：\n\U0001F33D 品种选择（如：适合干旱地区的玉米品种有哪些？）\n\
            \U0001F33D 种植技术（如：玉米播种深度多少最合适？）\n\U0001F33D 病虫害防治（如：玉米叶面出现黄斑怎么办？）\n您的问题可能超出我的专业范围，但如果您有关于玉米的疑问，我会全力为您解答！\n\
            需要我推荐一些常见的玉米问题吗？\"\n\n3. **关键词库示例**（需嵌入系统）：\n   - 问候触发词：[\"你好\",\"嗨\"\
            ,\"你是谁\",\"介绍\",\"hi\",\"hello\"]\n#回答模板\n\n\"您好！我是专注于玉米种植与病虫害的智能助手，可以为您解答关于玉米的各类问题，例如：\n\
            \U0001F33D 品种选择（如：适合干旱地区的玉米品种有哪些？）\n\U0001F33D 种植技术（如：玉米播种深度多少最合适？）\n\U0001F33D\
            \ 病虫害防治（如：玉米叶面出现黄斑怎么办？）\n您的问题可能超出我的专业范围，但如果您有关于玉米的疑问，我会全力为您解答！\n需要我推荐一些常见的玉米问题吗？\"\
            \n\n\n\n设计逻辑说明\n分层响应：\n无关问题：明确边界+举例引导。\n问候类问题：简短自我介绍+玉米知识彩蛋（增强趣味性）。\n\
            自然过渡：\n在问候回应中直接嵌入玉米问题示例，潜移默化引导用户提问。\n品牌感强化：\n通过“玉米种植小助手”的拟人化身份，建立专业且亲和的形象。\n\
            \n特殊处理\n当用户提问过于宽泛时：\n\"\"\n\n\n\n示例对话流程：\n用户：你是谁？\n智能体：\n（响应模板2，带小知识）\n\
            用户：大豆怎么施肥？\n智能体：\n（响应模板1，引导至玉米问题）\n\n用户的问题是：{{#sys.query#}}"
        selected: false
        title: 无关问题LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 89
      id: '1751965010191'
      position:
        x: -893.8231669220534
        y: 693.2776556166708
      positionAbsolute:
        x: -893.8231669220534
        y: 693.2776556166708
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1751965010191.text#}}'
        desc: ''
        selected: false
        title: 无关问题回复
        type: answer
        variables: []
      height: 104
      id: '1751965296697'
      position:
        x: -316.3381677438721
        y: 693.2776556166708
      positionAbsolute:
        x: -316.3381677438721
        y: 693.2776556166708
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: 用户有明确的诊断需求。例如，用户可能会上传一张农作物叶片有病斑的照片，询问这是得了什么病，该如何处理。问题的焦点是围绕具体个体的病虫害情况，目的是得到针对性的耕作建议，如该使用哪种药剂、如何调整种植环境等。
        - id: '2'
          name: 主要是用户想要了解病虫害方面的知识，而不是针对某个具体样本进行诊断。针对病虫害相关知识的科普，百科知识，不需要提供专业详细的报告
        desc: ''
        instructions: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/aihubmix/aihubmix
        query_variable_selector:
        - '1751360497336'
        - sys.query
        selected: false
        title: 问题分类器 2
        topics: []
        type: question-classifier
        vision:
          enabled: false
      height: 315
      id: '1752109667157'
      position:
        x: -1229.5035668538558
        y: -611.9717955146783
      positionAbsolute:
        x: -1229.5035668538558
        y: -611.9717955146783
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The query string is used to search for specific memories within
              the system. It can be a keyword, phrase, or sentence that describes
              the memory you're looking for.
            ja_JP: The query string is used to search for specific memories within
              the system. It can be a keyword, phrase, or sentence that describes
              the memory you're looking for.
            pt_BR: A string de consulta é usada para buscar memórias específicas dentro
              do sistema. Ela pode ser uma palavra-chave, frase ou sentença que descreve
              a memória que você está procurando.
            zh_Hans: 查询语句用于在系统中搜索特定的记忆。它可以是一个关键词、短语或描述你正在寻找的记忆的句子。
          label:
            en_US: Query string
            ja_JP: Query string
            pt_BR: Query string
            zh_Hans: 查询语句
          llm_description: The query string is used to search for specific memories
            within the system. It can be a keyword, phrase, or sentence that describes
            the memory you're looking for.
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          label:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          llm_description: User ID
          max: null
          min: null
          name: user_id
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          query: ''
          user_id: ''
        provider_id: yevanchen/mem0/mem0ai
        provider_name: yevanchen/mem0/mem0ai
        provider_type: builtin
        selected: false
        title: 检索内存
        tool_configurations: {}
        tool_description: 搜索和检索内存
        tool_label: 检索内存
        tool_name: retrieve_mem0ai_memory
        tool_parameters:
          query:
            type: mixed
            value: '{{#sys.query#}}'
          user_id:
            type: mixed
            value: '{{#sys.user_id#}}'
        type: tool
      height: 53
      id: '1752234929285'
      position:
        x: -1896.5614040044738
        y: -422.60732961806247
      positionAbsolute:
        x: -1896.5614040044738
        y: -422.60732961806247
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The message from the user in the conversation.
            ja_JP: The message from the user in the conversation.
            pt_BR: A mensagem do usuário na conversa.
            zh_Hans: 对话中的用户消息。
          label:
            en_US: User Message
            ja_JP: User Message
            pt_BR: Mensagem do Usuário
            zh_Hans: 用户消息
          llm_description: The message from the user in the conversation.
          max: null
          min: null
          name: user
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The response from the assistant in the conversation.
            ja_JP: The response from the assistant in the conversation.
            pt_BR: A resposta do assistente na conversa.
            zh_Hans: 对话中的助手回应。
          label:
            en_US: Assistant Response
            ja_JP: Assistant Response
            pt_BR: Resposta do Assistente
            zh_Hans: 助手回应
          llm_description: The response from the assistant in the conversation.
          max: null
          min: null
          name: assistant
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          label:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          llm_description: User ID
          max: null
          min: null
          name: user_id
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          assistant: ''
          user: ''
          user_id: ''
        provider_id: yevanchen/mem0/mem0ai
        provider_name: yevanchen/mem0/mem0ai
        provider_type: builtin
        selected: false
        title: 添加内存
        tool_configurations: {}
        tool_description: 添加内存支持
        tool_label: 添加内存
        tool_name: add_mem0ai_memory
        tool_parameters:
          assistant:
            type: mixed
            value: '{{#1751529646692.text#}}'
          user:
            type: mixed
            value: '{{#sys.query#}}'
          user_id:
            type: mixed
            value: '{{#sys.user_id#}}'
        type: tool
      height: 53
      id: '1752234989378'
      position:
        x: 918.5143878366291
        y: -487.1040867310686
      positionAbsolute:
        x: 918.5143878366291
        y: -487.1040867310686
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The message from the user in the conversation.
            ja_JP: The message from the user in the conversation.
            pt_BR: A mensagem do usuário na conversa.
            zh_Hans: 对话中的用户消息。
          label:
            en_US: User Message
            ja_JP: User Message
            pt_BR: Mensagem do Usuário
            zh_Hans: 用户消息
          llm_description: The message from the user in the conversation.
          max: null
          min: null
          name: user
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The response from the assistant in the conversation.
            ja_JP: The response from the assistant in the conversation.
            pt_BR: A resposta do assistente na conversa.
            zh_Hans: 对话中的助手回应。
          label:
            en_US: Assistant Response
            ja_JP: Assistant Response
            pt_BR: Resposta do Assistente
            zh_Hans: 助手回应
          llm_description: The response from the assistant in the conversation.
          max: null
          min: null
          name: assistant
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          label:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          llm_description: User ID
          max: null
          min: null
          name: user_id
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          assistant: ''
          user: ''
          user_id: ''
        provider_id: yevanchen/mem0/mem0ai
        provider_name: yevanchen/mem0/mem0ai
        provider_type: builtin
        selected: false
        title: 添加内存 (1)
        tool_configurations: {}
        tool_description: 添加内存支持
        tool_label: 添加内存
        tool_name: add_mem0ai_memory
        tool_parameters:
          assistant:
            type: mixed
            value: '{{#1751943695883.text#}}'
          user:
            type: mixed
            value: '{{#sys.query#}}'
          user_id:
            type: mixed
            value: '{{#sys.user_id#}}'
        type: tool
      height: 53
      id: '17522350562700'
      position:
        x: 281.9689302594716
        y: -86.18420893786721
      positionAbsolute:
        x: 281.9689302594716
        y: -86.18420893786721
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The message from the user in the conversation.
            ja_JP: The message from the user in the conversation.
            pt_BR: A mensagem do usuário na conversa.
            zh_Hans: 对话中的用户消息。
          label:
            en_US: User Message
            ja_JP: User Message
            pt_BR: Mensagem do Usuário
            zh_Hans: 用户消息
          llm_description: The message from the user in the conversation.
          max: null
          min: null
          name: user
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The response from the assistant in the conversation.
            ja_JP: The response from the assistant in the conversation.
            pt_BR: A resposta do assistente na conversa.
            zh_Hans: 对话中的助手回应。
          label:
            en_US: Assistant Response
            ja_JP: Assistant Response
            pt_BR: Resposta do Assistente
            zh_Hans: 助手回应
          llm_description: The response from the assistant in the conversation.
          max: null
          min: null
          name: assistant
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          label:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          llm_description: User ID
          max: null
          min: null
          name: user_id
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          assistant: ''
          user: ''
          user_id: ''
        provider_id: yevanchen/mem0/mem0ai
        provider_name: yevanchen/mem0/mem0ai
        provider_type: builtin
        selected: false
        title: 添加内存 (3)
        tool_configurations: {}
        tool_description: 添加内存支持
        tool_label: 添加内存
        tool_name: add_mem0ai_memory
        tool_parameters:
          assistant:
            type: mixed
            value: '{{#1751965010191.text#}}'
          user:
            type: mixed
            value: '{{#sys.query#}}'
          user_id:
            type: mixed
            value: '{{#sys.user_id#}}'
        type: tool
      height: 53
      id: '17522350976640'
      position:
        x: -601.1168150574974
        y: 693.2776556166708
      positionAbsolute:
        x: -601.1168150574974
        y: 693.2776556166708
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: '%Y-%m-%d %H:%M:%S'
          form: form
          human_description:
            en_US: Time format in strftime standard.
            ja_JP: Time format in strftime standard.
            pt_BR: Time format in strftime standard.
            zh_Hans: strftime 标准的时间格式。
          label:
            en_US: Format
            ja_JP: Format
            pt_BR: Format
            zh_Hans: 格式
          llm_description: null
          max: null
          min: null
          name: format
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: UTC
          form: form
          human_description:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: 时区
          label:
            en_US: Timezone
            ja_JP: Timezone
            pt_BR: Timezone
            zh_Hans: 时区
          llm_description: null
          max: null
          min: null
          name: timezone
          options:
          - icon: null
            label:
              en_US: UTC
              ja_JP: UTC
              pt_BR: UTC
              zh_Hans: UTC
            value: UTC
          - icon: null
            label:
              en_US: America/New_York
              ja_JP: America/New_York
              pt_BR: America/New_York
              zh_Hans: 美洲/纽约
            value: America/New_York
          - icon: null
            label:
              en_US: America/Los_Angeles
              ja_JP: America/Los_Angeles
              pt_BR: America/Los_Angeles
              zh_Hans: 美洲/洛杉矶
            value: America/Los_Angeles
          - icon: null
            label:
              en_US: America/Chicago
              ja_JP: America/Chicago
              pt_BR: America/Chicago
              zh_Hans: 美洲/芝加哥
            value: America/Chicago
          - icon: null
            label:
              en_US: America/Sao_Paulo
              ja_JP: America/Sao_Paulo
              pt_BR: América/São Paulo
              zh_Hans: 美洲/圣保罗
            value: America/Sao_Paulo
          - icon: null
            label:
              en_US: Asia/Shanghai
              ja_JP: Asia/Shanghai
              pt_BR: Asia/Shanghai
              zh_Hans: 亚洲/上海
            value: Asia/Shanghai
          - icon: null
            label:
              en_US: Asia/Ho_Chi_Minh
              ja_JP: Asia/Ho_Chi_Minh
              pt_BR: Ásia/Ho Chi Minh
              zh_Hans: 亚洲/胡志明市
            value: Asia/Ho_Chi_Minh
          - icon: null
            label:
              en_US: Asia/Tokyo
              ja_JP: Asia/Tokyo
              pt_BR: Asia/Tokyo
              zh_Hans: 亚洲/东京
            value: Asia/Tokyo
          - icon: null
            label:
              en_US: Asia/Dubai
              ja_JP: Asia/Dubai
              pt_BR: Asia/Dubai
              zh_Hans: 亚洲/迪拜
            value: Asia/Dubai
          - icon: null
            label:
              en_US: Asia/Kolkata
              ja_JP: Asia/Kolkata
              pt_BR: Asia/Kolkata
              zh_Hans: 亚洲/加尔各答
            value: Asia/Kolkata
          - icon: null
            label:
              en_US: Asia/Seoul
              ja_JP: Asia/Seoul
              pt_BR: Asia/Seoul
              zh_Hans: 亚洲/首尔
            value: Asia/Seoul
          - icon: null
            label:
              en_US: Asia/Singapore
              ja_JP: Asia/Singapore
              pt_BR: Asia/Singapore
              zh_Hans: 亚洲/新加坡
            value: Asia/Singapore
          - icon: null
            label:
              en_US: Europe/London
              ja_JP: Europe/London
              pt_BR: Europe/London
              zh_Hans: 欧洲/伦敦
            value: Europe/London
          - icon: null
            label:
              en_US: Europe/Berlin
              ja_JP: Europe/Berlin
              pt_BR: Europe/Berlin
              zh_Hans: 欧洲/柏林
            value: Europe/Berlin
          - icon: null
            label:
              en_US: Europe/Moscow
              ja_JP: Europe/Moscow
              pt_BR: Europe/Moscow
              zh_Hans: 欧洲/莫斯科
            value: Europe/Moscow
          - icon: null
            label:
              en_US: Australia/Sydney
              ja_JP: Australia/Sydney
              pt_BR: Australia/Sydney
              zh_Hans: 澳大利亚/悉尼
            value: Australia/Sydney
          - icon: null
            label:
              en_US: Pacific/Auckland
              ja_JP: Pacific/Auckland
              pt_BR: Pacific/Auckland
              zh_Hans: 太平洋/奥克兰
            value: Pacific/Auckland
          - icon: null
            label:
              en_US: Africa/Cairo
              ja_JP: Africa/Cairo
              pt_BR: Africa/Cairo
              zh_Hans: 非洲/开罗
            value: Africa/Cairo
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        params:
          format: ''
          timezone: ''
        provider_id: time
        provider_name: time
        provider_type: builtin
        selected: false
        title: 获取当前时间
        tool_configurations:
          format: '%Y-%m-%d %H:%M:%S'
          timezone: Asia/Shanghai
        tool_description: 一个用于获取当前时间的工具。
        tool_label: 获取当前时间
        tool_name: current_time
        tool_parameters: {}
        type: tool
      height: 115
      id: '1752235493902'
      position:
        x: -906.4634832412831
        y: -86.18420893786721
      positionAbsolute:
        x: -906.4634832412831
        y: -86.18420893786721
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: used for searching
            ja_JP: used for searching
            pt_BR: used for searching
            zh_Hans: 用于搜索网页内容
          label:
            en_US: Query string
            ja_JP: Query string
            pt_BR: Query string
            zh_Hans: 查询语句
          llm_description: key words for searching
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Parameter defines the language to use for the Google search. It's
              a two-letter language code. (e.g., en for English, es for Spanish, or
              fr for French). Head to https://serpapi.com/google-languages for a full
              list of supported Google languages.
            ja_JP: Parameter defines the language to use for the Google search. It's
              a two-letter language code. (e.g., en for English, es for Spanish, or
              fr for French). Head to https://serpapi.com/google-languages for a full
              list of supported Google languages.
            pt_BR: Parameter defines the language to use for the Google search. It's
              a two-letter language code. (e.g., en for English, es for Spanish, or
              fr for French). Head to https://serpapi.com/google-languages for a full
              list of supported Google languages.
            zh_Hans: 此参数定义用于 Google 搜索的语言。它是一个两字母的语言代码。 (例如，en 代表英语，es 代表西班牙语，fr 代表法语)。请前往
              https://serpapi.com/google-languages 查看完整的支持 Google 语言列表。
          label:
            en_US: Language
            ja_JP: Language
            pt_BR: Language
            zh_Hans: 语言
          llm_description: Language
          max: null
          min: null
          name: hl
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Parameter defines the country to use for the Google search. It's
              a two-letter country code. (e.g., us for the United States, uk for United
              Kingdom, or fr for France). Head to the https://serpapi.com/google-countries
              for a full list of supported Google countries.
            ja_JP: Parameter defines the country to use for the Google search. It's
              a two-letter country code. (e.g., us for the United States, uk for United
              Kingdom, or fr for France). Head to the https://serpapi.com/google-countries
              for a full list of supported Google countries.
            pt_BR: Parameter defines the country to use for the Google search. It's
              a two-letter country code. (e.g., us for the United States, uk for United
              Kingdom, or fr for France). Head to the https://serpapi.com/google-countries
              for a full list of supported Google countries.
            zh_Hans: 此参数定义用于 Google 搜索的国家。它是一个两字母的国家代码。 (例如，us 代表美国，uk 代表英国，fr 代表法国)。请前往
              https://serpapi.com/google-countries 查看完整的支持 Google 国家列表。
          label:
            en_US: Country
            ja_JP: Country
            pt_BR: Country
            zh_Hans: 国家
          llm_description: Country
          max: null
          min: null
          name: gl
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Parameter defines from where you want the search to originate.
              If several locations match the location requested, we'll pick the most
              popular one. Head to the /locations.json API if you need more precise
              control. The location and uule parameters can't be used together. It
              is recommended to specify location at the city level in order to simulate
              a real user’s search. If location is omitted, the search may take on
              the location of the proxy.
            ja_JP: Parameter defines from where you want the search to originate.
              If several locations match the location requested, we'll pick the most
              popular one. Head to the /locations.json API if you need more precise
              control. The location and uule parameters can't be used together. It
              is recommended to specify location at the city level in order to simulate
              a real user’s search. If location is omitted, the search may take on
              the location of the proxy.
            pt_BR: Parameter defines from where you want the search to originate.
              If several locations match the location requested, we'll pick the most
              popular one. Head to the /locations.json API if you need more precise
              control. The location and uule parameters can't be used together. It
              is recommended to specify location at the city level in order to simulate
              a real user’s search. If location is omitted, the search may take on
              the location of the proxy.
            zh_Hans: 此参数定义搜索的位置。如果有多个位置与请求的位置匹配，我们将选择最受欢迎的一个。如果需要更精确的控制，请前往 /locations.json
              API。location 和 uule 参数不能同时使用。建议在城市级别指定位置，以模拟真实用户的搜索。如果省略位置，则搜索可能会采用代理的位置。
          label:
            en_US: Location
            ja_JP: Location
            pt_BR: Location
            zh_Hans: 位置
          llm_description: Location
          max: null
          min: null
          name: location
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        params:
          gl: ''
          hl: ''
          location: ''
          query: ''
        provider_id: langgenius/google/google
        provider_name: langgenius/google/google
        provider_type: builtin
        selected: false
        title: 谷歌搜索
        tool_configurations: {}
        tool_description: 一个用于执行 Google SERP 搜索并提取片段和网页的工具。输入应该是一个搜索查询。
        tool_label: 谷歌搜索
        tool_name: google_search
        tool_parameters:
          gl:
            type: mixed
            value: cn
          hl:
            type: mixed
            value: zh-cn
          location:
            type: mixed
            value: ''
          query:
            type: mixed
            value: '{{#sys.query#}}检索有关在时间点

              {{#1752235493902.text#}}前1 年之内的网页信息'
        type: tool
      height: 53
      id: '1752235502261'
      position:
        x: -617.3517113540101
        y: -86.18420893786721
      positionAbsolute:
        x: -617.3517113540101
        y: -86.18420893786721
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: array[object]
        selected: false
        title: 变量聚合器 (1)
        type: variable-aggregator
        variables:
        - - '1752235502261'
          - json
        - - '1751943692201'
          - result
      height: 130
      id: '17522355261370'
      position:
        x: -316.3381677438721
        y: -86.18420893786721
      positionAbsolute:
        x: -316.3381677438721
        y: -86.18420893786721
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        extract_by:
          enabled: false
          serial: '1'
        filter_by:
          conditions:
          - comparison_operator: in
            key: type
            value:
            - image
          enabled: true
        item_var_type: file
        limit:
          enabled: false
          size: 10
        order_by:
          enabled: false
          key: name
          value: asc
        selected: false
        title: 列表操作 (1)
        type: list-operator
        var_type: array[file]
        variable:
        - sys
        - files
      height: 91
      id: '17522369316570'
      position:
        x: -893.8231669220534
        y: 333.742779971452
      positionAbsolute:
        x: -893.8231669220534
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 84b2ea13-d0ed-419b-b647-c37ab1c3b8b2
            value: ''
            varType: array[file]
            variable_selector:
            - '17522369316570'
            - result
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 条件分支 (1)
        type: if-else
      height: 125
      id: '17522369355610'
      position:
        x: -601.1168150574974
        y: 333.742779971452
      positionAbsolute:
        x: -601.1168150574974
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: o3
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: 5059a5ce-9bf7-4bcc-adde-c232a47494e3
          role: system
          text: 你是一名农业领域的专家，主要负责与玉米的培育、病虫害防治工作。用户会给你发送若干图片，你需要提取出图片中的特征。
        - id: 2e101f62-2859-4b70-a3e3-99420a77ba68
          role: user
          text: '这是我的玉米的图像：

            {{#17522369316570.result#}}'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: 问答图像分析
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - '17522369316570'
            - result
          enabled: true
      height: 118
      id: '17522369399550'
      position:
        x: -307.8341393766225
        y: 333.742779971452
      positionAbsolute:
        x: -307.8341393766225
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: array[object]
        selected: false
        title: 变量聚合器2
        type: variable-aggregator
        variables:
        - - '1751941815384'
          - result
        - - '17522369724100'
          - result
      height: 130
      id: '17522369631620'
      position:
        x: 281.9689302594716
        y: 333.742779971452
      positionAbsolute:
        x: 281.9689302594716
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - +MUtFaUoCJThwFsspJhmVDuWPliXyZzsgwxVjk8DHKg8sPbefUn/ViCiWLxvV20Z
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: jina-reranker-m0
            provider: langgenius/aihubmix/aihubmix
          score_threshold: null
          top_k: 10
        query_variable_selector:
        - '1751360497336'
        - sys.query
        retrieval_mode: multiple
        selected: false
        title: 种植知识检索 (1)
        type: knowledge-retrieval
      height: 91
      id: '17522369724100'
      position:
        x: -14.542459141329914
        y: 333.742779971452
      positionAbsolute:
        x: -14.542459141329914
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '17522369631620'
          - output
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: DeepSeek-R1
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: 0198d78d-b5a3-491f-9b78-d1b597e84002
          role: system
          text: '根据用户的问题和图片，知识库中的以下内容可能对你有用：

            {{#17522369399550.text#}}

            {{#17522369316570.result#}}

            {{#context#}}

            1. 核心指令

            ✅ 严格知识库绑定：

            所有回答必须基于实时检索到的知识库内容，禁止任何推测性、总结性或超纲回答。

            若知识库中无匹配数据，必须回复：“当前知识库未收录该问题的权威数据，建议参考《中国玉米栽培技术指南》或咨询当地农技站。”

            ✅ 精准回答格式：

            直接问题（如生育期、用量、指标）：返回数据+单位（例：“玉米生长周期为90-120天”）。

            操作类问题（如防治措施）：返回步骤化指令（例：“防治玉米螟需三步：1. 成虫期灯光诱杀；2. 幼虫期喷洒5%甲维盐；3. 收获后秸秆粉碎还田”）。

            2. 知识库检索与回答规则

            用户问题类型响应逻辑示例

            明确数据类（如时间、用量、指标）

            直接返回知识库检索结果，不带解释性语句

            用户问：“玉米发芽最低温度？” → 回答：“10℃”（知识库数据）

            技术流程类（如播种、施肥、防治）

            按知识库条目分步骤列出，用数字序号标注

            用户问：“玉米追肥方法？” → 回答：“1. 拔节期亩施尿素10kg；2. 大喇叭口期亩施尿素15kg”（知识库原文）

            对比类（如品种差异）

            列成表格对比，禁止主观评价

            用户问：“先玉335与郑单958差异？” → 回答：“| 特性 | 先玉335 | 郑单958 | |---|---|---| | 生育期
            | 105天 | 110天 |”（知识库结构化数据）

            示例：

            用户问：“棒子抽穗期咋浇水？” → 系统转换：“玉米抽穗期如何灌溉？” → 返回知识库检索结果。

            4. 错误控制指令

            markdown

            # 严格限制条款

            1. 若知识库检索结果为空 → 必须回复预设无数据提示，禁止自行补充内容。

            2. 若用户问题模糊（如“玉米怎么种”）→ 要求细化：“请明确具体环节（如播种密度/施肥量）”。'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 755
        selected: false
        title: 问答整合LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: '17522370895920'
      position:
        x: 593.9615532063231
        y: 333.742779971452
      positionAbsolute:
        x: 593.9615532063231
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The message from the user in the conversation.
            ja_JP: The message from the user in the conversation.
            pt_BR: A mensagem do usuário na conversa.
            zh_Hans: 对话中的用户消息。
          label:
            en_US: User Message
            ja_JP: User Message
            pt_BR: Mensagem do Usuário
            zh_Hans: 用户消息
          llm_description: The message from the user in the conversation.
          max: null
          min: null
          name: user
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The response from the assistant in the conversation.
            ja_JP: The response from the assistant in the conversation.
            pt_BR: A resposta do assistente na conversa.
            zh_Hans: 对话中的助手回应。
          label:
            en_US: Assistant Response
            ja_JP: Assistant Response
            pt_BR: Resposta do Assistente
            zh_Hans: 助手回应
          llm_description: The response from the assistant in the conversation.
          max: null
          min: null
          name: assistant
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          label:
            en_US: User ID
            ja_JP: User ID
            pt_BR: ID do Usuário
            zh_Hans: 用户ID
          llm_description: User ID
          max: null
          min: null
          name: user_id
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          assistant: ''
          user: ''
          user_id: ''
        provider_id: yevanchen/mem0/mem0ai
        provider_name: yevanchen/mem0/mem0ai
        provider_type: builtin
        selected: false
        title: 添加内存 (1)
        tool_configurations: {}
        tool_description: 添加内存支持
        tool_label: 添加内存
        tool_name: add_mem0ai_memory
        tool_parameters:
          assistant:
            type: mixed
            value: '{{#17522370895920.text#}}'
          user:
            type: mixed
            value: '{{#sys.query#}}'
          user_id:
            type: mixed
            value: '{{#sys.user_id#}}'
        type: tool
      height: 53
      id: '17522370958360'
      position:
        x: 918.5143878366291
        y: 333.742779971452
      positionAbsolute:
        x: 918.5143878366291
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17522370895920.text#}}'
        desc: ''
        selected: false
        title: 种植百科问答回复
        type: answer
        variables: []
      height: 104
      id: '17522371009640'
      position:
        x: 1240.8667145889674
        y: 333.742779971452
      positionAbsolute:
        x: 1240.8667145889674
        y: 333.742779971452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 847.4706082411087
      y: 348.04934547326775
      zoom: 0.29482020012568283
